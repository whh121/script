# é¡¹ç›®ç»“æ„è¿ç§»è¯´æ˜

## ğŸ”„ è¿ç§»æ¦‚è¿°

æœ¬é¡¹ç›®å·²ä»åŸæ¥çš„ `script` ç›®å½•é‡æ„ä¸º `flink_app` ç›®å½•ï¼Œä»¥æ›´å¥½åœ°ä½“ç°è¿™æ˜¯ä¸€ä¸ªFlinkåº”ç”¨é›†åˆé¡¹ç›®ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„å˜åŒ–

### æ—§ç»“æ„
```
script/
â”œâ”€â”€ README.md
â”œâ”€â”€ project.md
â”œâ”€â”€ final_mysql_to_doris_sync.sql
â”œâ”€â”€ mysql_doris_sync_monitor.sh
â”œâ”€â”€ setup_monitor_cron.sh
â”œâ”€â”€ kafka_to_doris_solution_sample.sql
â”œâ”€â”€ log/
â”œâ”€â”€ docs/
â”œâ”€â”€ test/
â””â”€â”€ flink/
```

### æ–°ç»“æ„
```
flink_app/
â”œâ”€â”€ README.md                    # ä¸»é¡¹ç›®è¯´æ˜
â”œâ”€â”€ mysql2doris/                 # MySQLåˆ°DorisåŒæ­¥é¡¹ç›®
â”‚   â”œâ”€â”€ README.md                # å­é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ final_mysql_to_doris_sync.sql
â”‚   â”‚   â”œâ”€â”€ mysql_doris_sync_monitor.sh
â”‚   â”‚   â”œâ”€â”€ setup_monitor_cron.sh
â”‚   â”‚   â””â”€â”€ kafka_to_doris_solution_sample.sql
â”‚   â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ project.md
â”‚   â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ checkpoints/             # Flinkæ£€æŸ¥ç‚¹
â””â”€â”€ [å…¶ä»–Flinkåº”ç”¨é¡¹ç›®...]
```

## ğŸ”§ å·²æ›´æ–°çš„é…ç½®

### 1. ç›‘æ§è„šæœ¬è·¯å¾„è‡ªé€‚åº”
- `mysql_doris_sync_monitor.sh` å·²æ›´æ–°ä¸ºä½¿ç”¨ç›¸å¯¹è·¯å¾„
- è‡ªåŠ¨æ£€æµ‹è„šæœ¬æ‰€åœ¨ç›®å½•ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹è·¯å¾„

### 2. æ—¥å¿—ç›®å½•è°ƒæ•´
- åŸ `log/` â†’ æ–° `mysql2doris/logs/`
- æ‰€æœ‰æ—¥å¿—è·¯å¾„å·²è‡ªåŠ¨é€‚é…

### 3. å®šæ—¶ä»»åŠ¡é…ç½®
- `setup_monitor_cron.sh` å·²æ›´æ–°ä¸ºæ–°çš„ç›®å½•ç»“æ„
- crontabä»»åŠ¡è·¯å¾„è‡ªåŠ¨é€‚é…

### 4. .gitignore æ›´æ–°
- é€‚é…æ–°çš„ç›®å½•ç»“æ„
- æ”¯æŒå¤šä¸ªFlinkåº”ç”¨é¡¹ç›®

## ğŸš€ è¿ç§»åçš„ä½¿ç”¨æ–¹æ³•

### è¿›å…¥é¡¹ç›®ç›®å½•
```bash
cd flink_app/mysql2doris
```

### å¯åŠ¨æ•°æ®åŒæ­¥
```bash
/home/ubuntu/flink/bin/sql-client.sh -f scripts/final_mysql_to_doris_sync.sql
```

### ç›‘æ§ç®¡ç†
```bash
# æ£€æŸ¥çŠ¶æ€
./scripts/mysql_doris_sync_monitor.sh health

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/monitor_$(date +%Y%m%d).log

# è®¾ç½®å®šæ—¶ä»»åŠ¡
./scripts/setup_monitor_cron.sh
```

## âœ… å…¼å®¹æ€§è¯´æ˜

1. **ç°æœ‰å®šæ—¶ä»»åŠ¡**: éœ€è¦é‡æ–°è¿è¡Œ `setup_monitor_cron.sh` æ›´æ–°è·¯å¾„
2. **ç›‘æ§è„šæœ¬**: è‡ªåŠ¨é€‚é…æ–°è·¯å¾„ï¼Œæ— éœ€ä¿®æ”¹
3. **Flinkä½œä¸š**: æ— éœ€ä¿®æ”¹ï¼Œç»§ç»­æ­£å¸¸è¿è¡Œ
4. **æ—¥å¿—æ–‡ä»¶**: å»ºè®®å¤‡ä»½åŸæœ‰æ—¥å¿—åæ¸…ç†

## ğŸ¯ æœªæ¥æ‰©å±•

æ–°çš„ç›®å½•ç»“æ„æ”¯æŒæ·»åŠ æ›´å¤šFlinkåº”ç”¨é¡¹ç›®ï¼š

```bash
flink_app/
â”œâ”€â”€ mysql2doris/          # ç°æœ‰é¡¹ç›®
â”œâ”€â”€ kafka2elasticsearch/  # æ–°é¡¹ç›®ç¤ºä¾‹
â”œâ”€â”€ redis2doris/          # æ–°é¡¹ç›®ç¤ºä¾‹
â””â”€â”€ stream_analytics/     # æ–°é¡¹ç›®ç¤ºä¾‹
```

æ¯ä¸ªé¡¹ç›®éƒ½éµå¾ªç»Ÿä¸€çš„ç›®å½•ç»“æ„è§„èŒƒã€‚

---

**é‡æ„å®Œæˆï¼Œé¡¹ç›®ç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ï¼** ğŸ‰ 